{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/Easy-steps-from-OpenFaaS-to-your-own-Telar-Social-Media-on-Cloud","result":{"data":{"markdownRemark":{"id":"00db7237-3023-5f8a-8498-60babb57df96","html":"<h2 id=\"who-is-this-project-for\"><a href=\"#who-is-this-project-for\" aria-label=\"who is this project for permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Who is this project for</h2>\n<p>If you are looking for a social media‚Ä¶</p>\n<ul>\n<li>Designed for different purpose, social network, social review, image sharing, video sharing, community blog, discussion or sharing economy network</li>\n<li>Easy to setup and develop.</li>\n<li>Open source.</li>\n<li>Running on public cloud, private cloud or on premises.</li>\n<li>Built base on Domain Driven Design architecture for microservice/cloud functions.</li>\n<li>Running on Kubernetes.</li>\n<li>High performance and at scale.</li>\n</ul>\n<h2 id=\"why-openfaas\"><a href=\"#why-openfaas\" aria-label=\"why openfaas permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why OpenFaaS</h2>\n<p>OpenFaaS makes it easy for developers to deploy functions and microservices to Kubernetes without repetitive, boiler-plate coding. Package your code or an existing binary in a Docker image to get a highly scalable endpoint with auto-scaling and metrics.</p>\n<ul>\n<li>Write functions in any language for Linux or Windows and package in Docker/OCI image format.</li>\n<li>Portable - runs on existing hardware or public/private cloud - Kubernetes and Docker Swarm native.</li>\n<li>Auto-scales as demand increases.</li>\n</ul>\n<h2 id=\"why-run-the-project-on-openfaas-cloud\"><a href=\"#why-run-the-project-on-openfaas-cloud\" aria-label=\"why run the project on openfaas cloud permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why run the project on OpenFaaS Cloud</h2>\n<p> OpenFaaS Cloud introduces an automated build and management system for your Serverless functions with native integrations into your source-control management system whether that is GitHub or GitLab.</p>\n<p>With OpenFaaS Cloud functions are managed through typing git push which reduces the tooling and learning curve required to operate functions for your team. As soon as OpenFaaS Cloud receives a push event from git it will run through a build-workflow which clones your repo, builds a Docker image, pushes it to a registry and then deploys your functions to your cluster. Each user can access and monitor their functions through their personal dashboard.</p>\n<h2 id=\"ingredients-\"><a href=\"#ingredients-\" aria-label=\"ingredients  permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ingredients üç≤üçú</h2>\n<p>For running this project (for Development purpose) all the ingredients have free usage plan to test the project.</p>\n<ul>\n<li><a href=\"https://github.com/openfaas/faas-cli#get-started-install-the-cli\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenFaaS CLI</a> installed on your computer. (Framework)</li>\n<li>Access to the <a href=\"https://github.com/openfaas/community-cluster\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenFaaS Cloud: Community Cluster</a>, or your own self-hosted cluster with <a href=\"https://github.com/openfaas-incubator/ofc-bootstrap\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ofc-bootstrap</a>. (Cloud)</li>\n<li><a href=\"https://www.mongodb.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MongoDB</a> database connection string and password. (Database)</li>\n<li><a href=\"https://www.heroku.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Heroku</a> account. (Websocket server)</li>\n<li><a href=\"https://account.google.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google</a> account. (Firebase Storage and Recaptcha)</li>\n<li><a href=\"https://redislabs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Redislabs</a> account. (Caching data)</li>\n</ul>\n<h2 id=\"get-started\"><a href=\"#get-started\" aria-label=\"get started permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get StartedüèÉüèª</h2>\n<p>After you have your ingredients ready, we will start to setup Telar Social on OpenFaaS cloud.</p>\n<h2 id=\"clone-telar-social-on-your-computer\"><a href=\"#clone-telar-social-on-your-computer\" aria-label=\"clone telar social on your computer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clone Telar Social on your computer</h2>\n<p>Telar social including¬†:\n<strong>Telar Web</strong> designed for handling authentication, notifications, realtime actions, file storage and admin services.\n<strong>Telar Social Serverless</strong> handling posts, comments, votes, social community and media services.\n<strong>Telar Social User Interface</strong> is the frontend that using ReactJS.¬†</p>\n<blockquote>\n<p>You need to clone these three repositories on your computer following blow instructions.</p>\n</blockquote>\n<h3 id=\"clone-telar-web\"><a href=\"#clone-telar-web\" aria-label=\"clone telar web permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clone Telar Web</h3>\n<ol>\n<li>Fork the <a href=\"https://github.com/red-gold/telar-web\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">telar-web</a> repository on Github for you account.</li>\n<li>Clone your fork to your local machine. Replace <code class=\"language-text\">[your_github_username]</code> with your github username.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone git@github.com:[your_github_username]/telar-web.git</code></pre></div>\n<h3 id=\"clone-telar-social-serverless\"><a href=\"#clone-telar-social-serverless\" aria-label=\"clone telar social serverless permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clone Telar Social Serverless</h3>\n<ol>\n<li>Fork the <a href=\"https://github.com/red-gold/ts-serverless\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ts-serverless</a> repository on Github for you account.</li>\n<li>Clone your fork to your local machine. Replace <code class=\"language-text\">[your_github_username]</code> with your github username.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone git@github.com:[your_github_username]/ts-serverless.git</code></pre></div>\n<h3 id=\"clone-telar-social-user-interface\"><a href=\"#clone-telar-social-user-interface\" aria-label=\"clone telar social user interface permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clone Telar Social User Interface</h3>\n<ol>\n<li>Fork the <a href=\"https://github.com/red-gold/ts-ui\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ts-ui</a> repository on Github for you account.</li>\n<li>Clone your fork to your local machine. Replace <code class=\"language-text\">[your_github_username]</code> with your github username.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone git@github.com:[your_github_username]/ts-ui.git</code></pre></div>\n<h3 id=\"enable-cicd-for-repositories\"><a href=\"#enable-cicd-for-repositories\" aria-label=\"enable cicd for repositories permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enable CI/CD for repositories</h3>\n<ol>\n<li>Go to your Github account setting and Installed GitHub Apps, click on OpenFaaS Cloud Community Cluster Config button</li>\n<li>From repository access choose <code class=\"language-text\">telar-web</code>, <code class=\"language-text\">ts-serverless</code>, <code class=\"language-text\">ts-ui</code> repositories.</li>\n</ol>\n<h2 id=\"openfaas-cloud-configuration\"><a href=\"#openfaas-cloud-configuration\" aria-label=\"openfaas cloud configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OpenFaaS Cloud configuration</h2>\n<p>You need set your <code class=\"language-text\">Github username</code> which you registered for OpenFaaS Cloud: Community Cluster account in  .</p>\n<ul>\n<li>From <code class=\"language-text\">root</code> of <code class=\"language-text\">ts-serverless</code> project go to <code class=\"language-text\">config</code> directory. Open app <code class=\"language-text\">gateway_config.yml</code> file.</li>\n<li>\n<p>Replace your <code class=\"language-text\">Github username</code> with <code class=\"language-text\">[your_github_username]</code> in :</p>\n<ul>\n<li>gateway: ‚Äù<a href=\"https://%5Byour_github_username%5D.o6s.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your_github_username].o6s.io</a>‚Äù</li>\n<li>origin: ‚Äù<a href=\"https://%5Byour_github_username%5D.o6s.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your_github_username].o6s.io</a>‚Äù</li>\n<li>web<em>domain: ‚Äù<a href=\"https://%5Byour\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your</a></em>github_username].o6s.io‚Äù</li>\n<li>external<em>domain: ‚Äù<a href=\"https://%5Byour\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your</a></em>github_username].o6s.io‚Äù</li>\n<li>cookie<em>root</em>domain: ‚Äú.o6s.io‚Äù</li>\n<li>external<em>redirect</em>domain: ‚Äù<a href=\"https://%5Byour_github_username%5D.o6s.io/auth\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your_github_username].o6s.io/auth</a>‚Äù</li>\n</ul>\n</li>\n</ul>\n<p> <code class=\"language-text\">https://[your-github-username].o6s.io/</code>. In my case the <code class=\"language-text\">[your-github-username]</code> is red-gold (<code class=\"language-text\">https://red-gold.o6s.io/</code>)</p>\n<ul>\n<li>Do the same for <code class=\"language-text\">telar-web</code> project too.</li>\n</ul>\n<h3 id=\"prerequire-for-creating-secret-file-\"><a href=\"#prerequire-for-creating-secret-file-\" aria-label=\"prerequire for creating secret file  permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequire for creating secret file üôä</h3>\n<p>There is a great feature in <code class=\"language-text\">faas-cli</code> which you can encrypt/seal secrets so that you can publish it to your public GitHub repository.\nEach secret use a public key to be sealed. As we are using <code class=\"language-text\">OpenFaaS Cloud: Community Cluster</code> we need to use community cluster public key to seal the secret.\nTo seal your secret <code class=\"language-text\">faas-cli</code> is using <a href=\"https://github.com/bitnami-labs/sealed-secrets\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">kubeseal</a>. Following <a href=\"https://github.com/openfaas/faas-cli#openfaas-cloud-extensions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">document</a> to install kubeseal.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">faas-cli cloud seal --download</code></pre></div>\n<p>Download the official OpenFaaS Cloud certificate.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> kubeseal --fetch-cert --controller-name ofc-sealedsecrets-sealed-secrets &gt; pub-cert.pem</code></pre></div>\n<h2 id=\"other-configurations\"><a href=\"#other-configurations\" aria-label=\"other configurations permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other configurations</h2>\n<p>Open a text file, following blow environment variables, replace <code class=\"language-text\">[your_{variable}]</code> with your variable value through the steps:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">MONGO_PWD=[your_mongodb_password] RECAPTCHA_KEY=[your_recaptcha_key] CLIENT_SECRET=[your_github_client_secret] REDIS_PWD=&#39;no-value&#39; ADMIN_USERNAME=[your_admin_username] ADMIN_PASSWORD=[your_admin_password] PAYLOAD_SECRET=[your_payload_secret] REF_EMAIL_PASS=[your_email_password] PHONE_AUTH_TOKEN=&#39;no-value&#39; PHONE_AUTH_ID=&#39;no-value&#39;</code></pre></div>\n<ol>\n<li>Create an internal trust secret\nThis secret will be used by each when a function calls another function internally.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PAYLOAD_SECRET=$(head -c 12 /dev/urandom | shasum| cut -d&#39; &#39; -f1)</code></pre></div>\n<ol start=\"2\">\n<li>Create a <a href=\"https://firebase.google.com/docs/storage\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Firebase Storage</a> secret.</li>\n<li><a href=\"https://www.youtube.com/watch?v=6juww5Lmvgo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Create a new project in Firebase.</a></li>\n<li><a href=\"https://firebase.google.com/docs/storage/web/start#create-default-bucket\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Create a default Storage bucket</a>. From the navigation pane of the Firebase console, select Storage, then click Get started.</li>\n<li>In the Firebase console, open Settings > <a href=\"https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Service Accounts</a>.</li>\n<li>Click Generate New Private Key, then confirm by clicking Generate Key.</li>\n<li>Aftar download, change the file name to <code class=\"language-text\">serviceAccountKey.json</code>.</li>\n<li>Copy <code class=\"language-text\">serviceAccountKey.json</code> file in the <code class=\"language-text\">telar-web</code> root directory.</li>\n<li>Set the bucket name(bucket<em>name) in `telar-web/config/storage</em>config.yml<code class=\"language-text\">file to your firebase bucket name. Following pattern</code>[your<em>firebase</em>project_name].appspot.com<code class=\"language-text\">in my case my project name is</code>resume-web-app<code class=\"language-text\">so the bucket name will be</code>resume-web-app.appspot.com`.</li>\n<li><a href=\"https://docs.atlas.mongodb.com/getting-started/#deploy-a-free-tier-cluster\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Create a cluster and database on Mongodb cloud</a>.</li>\n<li>From root of <code class=\"language-text\">telar-web</code> project go to <code class=\"language-text\">config</code> directory. Open app <code class=\"language-text\">app_config.yml</code> file.</li>\n<li>Set <code class=\"language-text\">mongo_user</code> field same as mongo user you created in mongodb cloud.</li>\n<li>Replace <code class=\"language-text\">[your_mongodb_password]</code> in text file for environment variables.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">MONGO_PWD=[your_mongodb_password]</code></pre></div>\n<ol start=\"4\">\n<li>Enable <a href=\"https://www.google.com/recaptcha/intro/v3.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google reCAPTCHA</a></li>\n<li>Click on <code class=\"language-text\">Admin console</code> button.</li>\n<li>In label field, input <code class=\"language-text\">telar social</code>. Choose <code class=\"language-text\">reCAPTCHA v2</code> from <code class=\"language-text\">reCAPTCHA type</code>. Add your domain <code class=\"language-text\">[your-github-username].o6s.io</code> in <code class=\"language-text\">Domains</code> field and click on<code class=\"language-text\">+</code> button.In my case the <code class=\"language-text\">[your-github-username]</code> is red-gold (<code class=\"language-text\">red-gold.o6s.io</code>). </li>\n<li>Enable <code class=\"language-text\">Accept the reCAPTCHA Terms of Service</code> and click on <code class=\"language-text\">submit</code> button.</li>\n<li>Copy <code class=\"language-text\">site key</code> and set <code class=\"language-text\">recaptcha_site_key</code> in <code class=\"language-text\">config/app_config.yml</code> file.</li>\n<li>Replace [your<em>recaptcha</em>key] in text file for environment variables.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">RECAPTCHA_KEY=[your_recaptcha_key]</code></pre></div>\n<ol start=\"5\">\n<li>Following <a href=\"https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github instruction</a> create an oauth app. Be sure to set <code class=\"language-text\">Authorization callback URL</code> to <code class=\"language-text\">https://[your_github_username].o6s.io/auth</code> in my case <code class=\"language-text\">https://red-gold.o6s.io/auth</code>.</li>\n<li>Copy you oauth app client id and set <code class=\"language-text\">client_id</code> in <code class=\"language-text\">telar-web/config/storage_config.yml</code> file.</li>\n<li>Replace [your<em>github</em>client_secret] in text file for environment variables.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CLIENT_SECRET=[your_github_client_secret]</code></pre></div>\n<ol start=\"6\">\n<li>Generate a key/pair.\nThis key/pair is used to sign the JWT and then verify it later. </li>\n<li>To generate private key run below command.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl ecparam -genkey -name prime256v1 -noout -out key</code></pre></div>\n<ul>\n<li>\n<p>To generate public key</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">openssl ec -in key -pubout -out key.pub</code></pre></div>\n</li>\n<li>Set email for sending signup/reset password verfication code.</li>\n<li>Set <code class=\"language-text\">ref_email</code> in <code class=\"language-text\">telar-web/config/app_config.yml</code> file to your email.</li>\n<li>Replace [your<em>email</em>password] in text file for environment variables.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">REF_EMAIL_PASS=[your_email_password]</code></pre></div>\n<ol start=\"8\">\n<li>Replace your admin account username and password in environment variables file.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ADMIN_USERNAME=[your_admin_username]\nADMIN_PASSWORD=[your_admin_password]</code></pre></div>\n<ol start=\"9\">\n<li>\n<p>After setting all the secrets in environment variables, using terminal, in the root of <code class=\"language-text\">telar-web</code> project enter all variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">MONGO_PWD=[your_mongofb_password] RECAPTCHA_KEY=[your_recaptcha_key] CLIENT_SECRET=[your_github_client_secret] REDIS_PWD=&#39;no-value&#39; ADMIN_USERNAME=[your_admin_username] ADMIN_PASSWORD=[your_admin_password] PAYLOAD_SECRET=[your_payload_secret] REF_EMAIL_PASS=[your_email_password] PHONE_AUTH_TOKEN=&#39;no-value&#39; PHONE_AUTH_ID=&#39;no-value&#39;</code></pre></div>\n</li>\n<li>\n<p>From terminal and in the root directory of <code class=\"language-text\">telar-web</code> project enter blow command. Replace <code class=\"language-text\">[you_github_user_name]-secrets</code> with you Github username in my case <code class=\"language-text\">red-gold-secrets</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">faas-cli cloud seal --name red-gold-secrets \\\n--literal mongo-pwd=&quot;$MONGO_PWD&quot; --literal recaptcha-key=&quot;$RECAPTCHA_KEY&quot; \\\n--from-file=&quot;key&quot; --from-file=&quot;key.pub&quot; --from-file=&quot;serviceAccountKey.json&quot; \\\n--literal ts-client-secret=&quot;$CLIENT_SECRET&quot; --literal redis-pwd=&quot;$REDIS_PWD&quot; \\\n--literal admin-username=&quot;$ADMIN_USERNAME&quot; \\\n--literal admin-password=&quot;$ADMIN_PASSWORD&quot; --literal payload-secret=&quot;$PAYLOAD_SECRET&quot; \\\n--literal ref-email-pass=&quot;$REF_EMAIL_PASS&quot; --literal phone-auth-token=&quot;$PHONE_AUTH_TOKEN&quot; \\\n--literal phone-auth-id=&quot;$PHONE_AUTH_ID&quot;</code></pre></div>\n</li>\n</ol>\n<p> Check the <code class=\"language-text\">telar-web</code> root directory, you should see <code class=\"language-text\">secrets.yml</code> file. Copy this file in <code class=\"language-text\">ts-serverless</code> root directory too.</p>\n<ol start=\"11\">\n<li>\n<p>Enable realtime data for user chat, notification and actions.\nWe are using <a href=\"https://socket.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">socket.io</a> to handle realtime data. We provided a websocket server running on Heroku. Setup websocket server following bellow steps. We assumed you have Heroku account logged in already.</p>\n<ol>\n<li>Go to <a href=\"https://github.com/Qolzam/ts-websocket\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ts-websocket</a> repository and click on <code class=\"language-text\">Deploy to Heroku</code>.</li>\n<li>You will be redirected to <code class=\"language-text\">Heroku</code> website. Type your app name and click on <code class=\"language-text\">Deploy app</code>.</li>\n<li>Click on <code class=\"language-text\">Manage App</code> then click on <code class=\"language-text\">Settings</code> tab. Find <code class=\"language-text\">Config Vars</code> and click on <code class=\"language-text\">Reveal Config Vars</code>.</li>\n<li>Add following Key/Value in your app.</li>\n<li>Key: <code class=\"language-text\">GATEWAY</code> , Value: <a href=\"https://%5Byour-github-username%5D.o6s.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your-github-username].o6s.io/</a></li>\n<li>Key: <code class=\"language-text\">PAYLOAD_SECRET</code> , Value: <code class=\"language-text\">your_payload_secret</code></li>\n<li>Key: <code class=\"language-text\">PRETTY_URL</code> , Value:  <code class=\"language-text\">true</code></li>\n<li>Verify your app using <code class=\"language-text\">https://[your_heroku_app_name].herokuapp.com/ping</code>. You should recevice <code class=\"language-text\">success: true</code> which means your websocket server is running.</li>\n<li>From <code class=\"language-text\">telar-web</code> root directory, go to config folder and open <code class=\"language-text\">gateway_config.yml</code> file. Set <code class=\"language-text\">websocket_server_url</code> variable to <code class=\"language-text\">https://[your_heroku_app_name].herokuapp.com</code> . Replace <code class=\"language-text\">[your_heroku_app_name]</code> with your app name in heroku.</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"deploy-telar-social\"><a href=\"#deploy-telar-social\" aria-label=\"deploy telar social permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy Telar SocialüéØ</h2>\n<p>From terminal go to the root of each project (<code class=\"language-text\">telar-web</code>, <code class=\"language-text\">ts-serverless</code>, <code class=\"language-text\">ts-ui</code>) and run command blow.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git add . &amp;&amp; git commit -sm &#39;Deploy Telar Social.&#39; &amp;&amp; git push</code></pre></div>\n<p>It may takes some minutes to deploy functions running on OpenFaaS Cloud: Community Cluster. You are able to check <a href=\"https://docs.openfaas.com/openfaas-cloud/user-guide/#check-the-status-of-the-build\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">the build status</a> from your github repository or from <a href=\"https://openfaas.slack.com/archives/CAN60NKBM\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenFaaS slack channel</a>. When the build and deployment is done, you can access to Telar Social using <code class=\"language-text\">https://[your-github-username].o6s.io/</code>,in my case the [your-github-username] is red-gold <code class=\"language-text\">https://red-gold.o6s.io/admin</code>. Click on start to start the project.</p>\n<p>To start go <a href=\"https://%5Byour-github-username%5D.o6s.io/auth/admin/login\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://[your-github-username].o6s.io/auth/admin/login</a> page. Wait until you seen welcome page.</p>\n<p>Now your Telar social is ready to use!üòçüèÜ</p>\n<h3 id=\"access-pages\"><a href=\"#access-pages\" aria-label=\"access pages permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Access pages:</h3>\n<ul>\n<li>Signup page: <code class=\"language-text\">https://[your-github-username].o6s.io/auth/signup</code></li>\n<li>Login page: <code class=\"language-text\">https://[your-github-username].o6s.io/auth/login</code></li>\n</ul>\n<h3 id=\"originally-published-on-medium\"><a href=\"#originally-published-on-medium\" aria-label=\"originally published on medium permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Originally published on <a href=\"https://medium.com/red-gold/mail-from-slack-by-openfaas-6eeee2228cec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Medium</a>.</h3>","fields":{"slug":"/posts/Easy-steps-from-OpenFaaS-to-your-own-Telar-Social-Media-on-Cloud","tagSlugs":["/tag/cloud/","/tag/openfaas/","/tag/open-source/","/tag/social-media/","/tag/telar-social/","/tag/kubernetes/"]},"frontmatter":{"date":"2019-12-21T22:40:32.169Z","description":"By the end of this article you have your own [Telar Social](https://telar.press) media up and running using OpenFaaS on OpenFaaS Cloud through some easy steps in a nutshell.","tags":["Cloud","Openfaas","Open Source","Social Media","Telar Social","Kubernetes"],"title":"Easy steps from OpenFaaS to your own Telar Social Media on Cloud","socialImage":"https://miro.medium.com/max/2560/1*71siLgI2KaK-b-Hr7sZRRg.jpeg"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/Easy-steps-from-OpenFaaS-to-your-own-Telar-Social-Media-on-Cloud"}}}